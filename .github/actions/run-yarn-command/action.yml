# You can find code and docs here: https://github.com/allthings/github-action-toolsname: run-yarn-command
name: run-yarn-command
description: "Run yarn v4 command"
inputs:
  command:
    description: "Yarn command"
    required: true
  node-version:
    default: "20"
    description: "Node version"
    required: false
runs:
  using: "composite"
  steps:
    - uses: actions/checkout@v5
      env:
        CURRENT_RUNNER: ${{ runner.name }}

    - name: setup node
      uses: ./.github/actions/node-manager
      with:
        node-version: ${{ inputs['node-version'] }}

    - name: install yarn v4 dependencies
      shell: bash
      run: |
        yarn install --immutable

    - name: run yarn command
      shell: bash
      env:
        COMMAND: ${{ inputs.command }}
      run: |
        yarn ${{ env.COMMAND }}
